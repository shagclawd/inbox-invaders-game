<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inbox Invaders</title>
  <style>
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#0b1020; color:#e7ecff; display:grid; place-items:center; min-height:100vh; }
    .wrap { text-align:center; }
    canvas { background: linear-gradient(#0d1330, #050816); border:1px solid #2b3a7a; border-radius:12px; box-shadow:0 0 30px rgba(70,120,255,.25); }
    .hint { opacity:.8; margin-top:8px; font-size:14px; }
    a { color:#8fb3ff; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üì• Inbox Invaders</h1>
    <canvas id="game" width="720" height="480"></canvas>
    <div class="hint">Move: ‚Üê ‚Üí or A/D ‚Ä¢ Shoot: Space ‚Ä¢ Restart: R</div>
    <div class="hint"><span id="status"></span></div>
  </div>
<script>
const c = document.getElementById('game'); const ctx = c.getContext('2d');
const statusEl = document.getElementById('status');
let keys = {}, bullets=[], enemies=[], drops=[], score=0, lives=3, tick=0, over=false;
const player = {x: c.width/2-22, y:c.height-45, w:44, h:20, speed:6, cooldown:0};
const labels=["Newsletter","Ping","Urgent?","Reminder","Invoice","Follow-up","FYI"];
function spawnWave(){
  enemies=[];
  for(let r=0;r<3;r++) for(let i=0;i<8;i++) enemies.push({x:70+i*75,y:55+r*45,w:56,h:26,dx:1+r*0.2,label:labels[(i+r)%labels.length]});
}
function drawPlayer(){ctx.fillStyle='#70a1ff';ctx.fillRect(player.x,player.y,player.w,player.h);ctx.fillStyle='#9bc2ff';ctx.fillRect(player.x+16,player.y-8,12,8);}
function drawBullet(b){ctx.fillStyle='#ffd166';ctx.fillRect(b.x,b.y,4,10);}
function drawEnemy(e){ctx.fillStyle='#ff6b8a';ctx.fillRect(e.x,e.y,e.w,e.h);ctx.fillStyle='#2b1020';ctx.font='10px sans-serif';ctx.fillText(e.label,e.x+5,e.y+16);}
function drawDrop(d){ctx.fillStyle='#7cf29a';ctx.fillRect(d.x,d.y,16,16);ctx.fillStyle='#143321';ctx.font='12px sans-serif';ctx.fillText('+',d.x+5,d.y+12);}
function collide(a,b){return a.x < b.x+b.w && a.x+a.w > b.x && a.y < b.y+b.h && a.y+a.h > b.y;}
function reset(){ bullets=[]; drops=[]; score=0; lives=3; over=false; player.x=c.width/2-22; spawnWave(); }
spawnWave();
window.addEventListener('keydown',e=>{keys[e.key.toLowerCase()]=true; if(e.code==='Space') e.preventDefault(); if(over&&e.key.toLowerCase()==='r') reset();});
window.addEventListener('keyup',e=>keys[e.key.toLowerCase()]=false);
function loop(){
  tick++; ctx.clearRect(0,0,c.width,c.height);
  if(!over){
    if((keys['arrowleft']||keys['a'])&&player.x>0) player.x-=player.speed;
    if((keys['arrowright']||keys['d'])&&player.x+player.w<c.width) player.x+=player.speed;
    if((keys[' ']||keys['space'])&&player.cooldown<=0){ bullets.push({x:player.x+player.w/2-2,y:player.y-10,w:4,h:10,dy:-8}); player.cooldown=12; }
    if(player.cooldown>0) player.cooldown--;
    bullets.forEach(b=>b.y+=b.dy); bullets=bullets.filter(b=>b.y>-20);
    let edge=false;
    enemies.forEach(e=>{e.x+=e.dx; if(e.x<8||e.x+e.w>c.width-8) edge=true;});
    if(edge) enemies.forEach(e=>{e.dx*=-1; e.y+=14; if(e.y+e.h>player.y){ lives=0; over=true; }});
    bullets.forEach(b=>{
      enemies.forEach(e=>{ if(!e.dead && collide(b,e)){ e.dead=true; b.y=-99; score+=10; if(Math.random()<0.08) drops.push({x:e.x+20,y:e.y,w:16,h:16,dy:2}); }});
    });
    enemies=enemies.filter(e=>!e.dead);
    drops.forEach(d=>d.y+=d.dy);
    drops= drops.filter(d=>d.y<c.height+20);
    drops.forEach(d=>{ if(collide({...d,w:16,h:16}, player)){ d.y=9999; lives=Math.min(5,lives+1); } });
    if(enemies.length===0) spawnWave();
    if(tick%120===0){ // random enemy shots
      const shooter=enemies[Math.floor(Math.random()*enemies.length)];
      if(shooter) bullets.push({x:shooter.x+shooter.w/2,y:shooter.y+shooter.h,w:4,h:10,dy:4,enemy:true});
    }
    bullets.forEach(b=>{ if(b.enemy && collide({x:b.x,y:b.y,w:4,h:10},player)){ b.y=9999; lives--; if(lives<=0) over=true; }});
  }
  drawPlayer(); bullets.forEach(drawBullet); enemies.forEach(drawEnemy); drops.forEach(drawDrop);
  ctx.fillStyle='#e7ecff'; ctx.font='16px sans-serif'; ctx.fillText(`Score: ${score}`, 14, 24); ctx.fillText(`Lives: ${lives}`, 620, 24);
  if(over){ ctx.fillStyle='rgba(0,0,0,.55)'; ctx.fillRect(0,0,c.width,c.height); ctx.fillStyle='#fff'; ctx.font='36px sans-serif'; ctx.fillText('Inbox Overload!',230,210); ctx.font='20px sans-serif'; ctx.fillText('Press R to restart',275,250); }
  statusEl.textContent = over ? 'Inbox reached critical mass üö®' : 'Defend your focus time.';
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
